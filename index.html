<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>playgroundX | Velocity</title>
    <meta name="theme-color" content="#000000">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    
    <style>
        :root {
            --primary: #8B5CF6;
            --primary-light: #a78bfa;
            --bg-dark: #000000;
            --text-main: #ffffff;
            --text-muted: #9ca3af;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            margin: 0; padding: 0;
            background-color: var(--bg-dark);
            font-family: 'Inter', sans-serif;
            color: var(--text-main);
            width: 100vw; height: 100vh;
            overflow: hidden;
            cursor: default;
        }

        /* --- THE ANIMATION ENGINE --- */
        
        /* 1. The Lighter Animated Underlay (High Energy) */
        #plasma-bg {
            position: fixed; inset: -50%; width: 200%; height: 200%;
            z-index: 0;
            background: linear-gradient(
                45deg,
                #4c1d95 0%,
                #8b5cf6 25%,
                #2dd4bf 50%, /* Teal pop */
                #f472b6 75%, /* Pink pop */
                #4c1d95 100%
            );
            background-size: 400% 400%;
            animation: plasma-flow 15s ease infinite;
            filter: blur(80px); /* Blends the colors into a fog */
            opacity: 0.6; /* Brightness control */
        }

        @keyframes plasma-flow {
            0% { background-position: 0% 50%; transform: rotate(0deg); }
            50% { background-position: 100% 50%; transform: rotate(2deg); }
            100% { background-position: 0% 50%; transform: rotate(0deg); }
        }

        /* 2. The Darker Overlay (The "Glass" Wall) */
        #glass-wall {
            position: fixed; inset: 0; z-index: 1;
            background: rgba(5, 5, 5, 0.88); /* Very heavy tint */
            backdrop-filter: blur(40px); /* Heavy frost */
            /* The radial gradient simulates a spotlight following the mouse via JS */
            background-image: radial-gradient(
                circle at var(--x, 50%) var(--y, 50%), 
                rgba(255, 255, 255, 0.03) 0%, 
                transparent 40%
            );
        }

        /* 3. Texture Mesh */
        #noise-mesh {
            position: fixed; inset: 0; z-index: 2; opacity: 0.07;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.85' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            pointer-events: none;
        }

        /* --- SCROLL CONTENT --- */
        #content-layer {
            position: relative; z-index: 10;
            height: 100vh; overflow-y: auto; overflow-x: hidden;
            scroll-behavior: smooth;
        }

        /* Navigation */
        nav {
            display: flex; justify-content: space-between; align-items: center;
            padding: 30px 8%; position: fixed; top: 0; width: 100%; z-index: 100;
            transition: 0.3s;
        }
        nav.scrolled { padding: 15px 8%; background: rgba(0,0,0,0.8); border-bottom: 1px solid rgba(255,255,255,0.1); }
        
        .brand { font-weight: 900; font-size: 24px; letter-spacing: -1px; text-transform: lowercase; }
        .brand span { color: var(--primary); }
        
        .nav-btn {
            background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.1);
            color: white; padding: 12px 28px; border-radius: 4px;
            font-size: 11px; font-weight: 700; letter-spacing: 1px; text-transform: uppercase;
            cursor: pointer; transition: 0.3s;
        }
        .nav-btn:hover { background: white; color: black; box-shadow: 0 0 20px rgba(255,255,255,0.5); }

        /* Typography & Layout */
        section {
            padding: 100px 8%; min-height: 90vh;
            display: flex; flex-direction: column; justify-content: center;
            opacity: 0; transform: translateY(30px); transition: 0.8s ease-out;
        }
        section.visible { opacity: 1; transform: translateY(0); }

        .hero h1 {
            font-size: clamp(50px, 7vw, 100px); font-weight: 800; line-height: 0.95;
            margin: 0 0 40px 0; letter-spacing: -3px;
            /* Text Mask to show plasma through letters */
            background: linear-gradient(to bottom right, #fff, #94a3b8);
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        .lead { font-size: 20px; color: var(--text-muted); max-width: 600px; line-height: 1.6; margin-bottom: 50px; }

        /* Pulse Button */
        .btn-pulse {
            position: relative;
            background: var(--primary); color: white;
            padding: 22px 55px; border-radius: 50px; font-weight: 700; border: none; font-size: 16px;
            cursor: pointer; overflow: hidden;
            box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7);
            animation: pulse-purple 2s infinite;
        }
        @keyframes pulse-purple {
            0% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 20px rgba(139, 92, 246, 0); }
            100% { transform: scale(0.95); box-shadow: 0 0 0 0 rgba(139, 92, 246, 0); }
        }
        .btn-pulse:hover { animation: none; transform: scale(1.05); background: white; color: black; }

        /* Cards */
        .grid-split { display: grid; grid-template-columns: 1fr 1fr; gap: 80px; align-items: center; }
        @media (max-width: 800px) { .grid-split { grid-template-columns: 1fr; } }

        .frosted-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            padding: 40px; border-radius: 16px;
            backdrop-filter: blur(10px);
            transition: 0.3s;
        }
        .frosted-card:hover { background: rgba(255, 255, 255, 0.06); border-color: rgba(255,255,255,0.2); transform: translateY(-5px); }

        .feature-icon { 
            font-size: 32px; margin-bottom: 20px; 
            background: linear-gradient(45deg, var(--primary), #2dd4bf); 
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        h2 { font-size: 40px; margin-bottom: 20px; letter-spacing: -1px; }
        p { color: #9ca3af; line-height: 1.7; }

        /* Footer */
        footer { padding: 80px 8%; text-align: center; border-top: 1px solid #111; color: #444; font-size: 13px; }

        /* --- AUTH & WIZARD STYLES --- */
        #auth-overlay, #wizard-overlay {
            position: fixed; inset: 0; z-index: 500;
            background: rgba(0,0,0,0.9); backdrop-filter: blur(20px);
            display: none; align-items: center; justify-content: center;
        }
        #auth-overlay.active, #wizard-overlay.active { display: flex; animation: fadeUp 0.4s ease; }
        @keyframes fadeUp { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .modal-box {
            width: 100%; max-width: 450px; background: #0a0a0a;
            border: 1px solid #222; border-radius: 20px; padding: 40px;
            box-shadow: 0 50px 100px -20px rgba(0,0,0,1);
        }

        .input-group { margin-bottom: 15px; }
        .input-dark {
            width: 100%; background: #111; border: 1px solid #333;
            padding: 15px; color: white; border-radius: 8px; outline: none; transition: 0.3s;
        }
        .input-dark:focus { border-color: var(--primary); background: #161616; }

        .btn-block {
            width: 100%; padding: 15px; background: white; color: black; border: none;
            font-weight: 800; border-radius: 8px; cursor: pointer; transition: 0.2s;
        }
        .btn-block:hover { background: var(--primary); color: white; }
        .btn-block:disabled { background: #333; color: #666; cursor: not-allowed; }

        /* Wizard Steps */
        .wiz-step { display: none; text-align: center; flex-direction: column; align-items: center; }
        .wiz-step.active { display: flex; animation: slideIn 0.3s ease; }
        @keyframes slideIn { from { transform: translateX(20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        
        .upload-area {
            width: 100%; height: 160px; border: 2px dashed #333; margin-bottom: 20px;
            border-radius: 12px; display: flex; align-items: center; justify-content: center;
            cursor: pointer; color: #666; transition: 0.3s;
        }
        .upload-area:hover { border-color: white; color: white; background: rgba(255,255,255,0.05); }

    </style>
</head>
<body>

    <div id="plasma-bg"></div> <div id="glass-wall"></div> <div id="noise-mesh"></div>

    <div id="content-layer">
        
        <nav id="navbar">
            <div class="brand">playground<span>X</span></div>
            <button class="nav-btn" onclick="openAuth()">Enter Lounge</button>
        </nav>

        <section class="hero visible">
            <div style="font-family: monospace; color: var(--primary); margin-bottom: 20px;">SYSTEM STATUS: SECURE // 100% VERIFIED</div>
            <h1>The Adult<br>Playground.</h1>
            <p class="lead">We replaced algorithms with biology. A high-fidelity, video-first dating experience for adults who value chemistry over games.</p>
            <button class="btn-pulse" onclick="openAuth()">Apply for Access</button>
        </section>

        <section>
            <div class="grid-split">
                <div class="frosted-card">
                    <div class="feature-icon">üõ°Ô∏è</div>
                    <h3 style="color:white; margin-top:0;">The Iron Defense</h3>
                    <p>We are the only platform that mandates Government ID verification for 100% of users. No bots. No catfish. No exceptions.</p>
                </div>
                <div>
                    <h2>Serious Inquiries Only.</h2>
                    <p>The modern dating app is a slot machine designed to keep you single. We are a utility designed to get you offline.</p>
                    <p>Our "Gatekeeper" system ensures that every person you see is real, verified, and strictly 18+.</p>
                </div>
            </div>
        </section>

        <section>
            <div class="grid-split">
                <div style="order:2;">
                    <div class="frosted-card">
                        <div class="feature-icon">‚ö°</div>
                        <h3 style="color:white; margin-top:0;">4K Chemistry</h3>
                        <p>Static photos lie. We use high-bitrate video profiles so you can gauge vibe, voice, and mannerisms instantly.</p>
                    </div>
                </div>
                <div style="order:1;">
                    <h2>See the Real Person.</h2>
                    <p>Don't waste weeks texting a phantom. Our video-first approach reveals the truth instantly. If the chemistry isn't there, you'll know in seconds, not dates.</p>
                </div>
            </div>
        </section>

        <section style="text-align: center; min-height: 50vh;">
            <h2 style="font-size: 60px; line-height: 1;">Are you real?</h2>
            <p style="margin-bottom: 40px;">Join the 1% of daters who have nothing to hide.</p>
            <button class="btn-pulse" onclick="openAuth()">Begin Verification</button>
        </section>

        <footer>
            &copy; 2026 playgroundX. Velocity Edition.<br>
            Encrypted Data / Auto-Deletion / Zero-Tolerance
        </footer>

    </div>

    <div id="auth-overlay">
        <div class="modal-box">
            <div style="display:flex; justify-content:space-between; margin-bottom:20px;">
                <h3 id="auth-title" style="margin:0; color:white;">Member Login</h3>
                <span onclick="closeAuth()" style="cursor:pointer; color:#666;">‚úï</span>
            </div>
            
            <input type="email" id="email" class="input-dark input-group" placeholder="Email">
            <input type="password" id="password" class="input-dark input-group" placeholder="Password">
            
            <div id="signup-extra" style="display:none;">
                <label style="font-size:12px; color:#666; display:block; margin-bottom:5px;">Date of Birth (18+ Required)</label>
                <input type="date" id="dob" class="input-dark input-group" style="color-scheme:dark;">
            </div>

            <button id="auth-btn" class="btn-block" onclick="handleAuth()">SECURE ENTRY</button>
            <button class="btn-block" style="background:transparent; border:1px solid #333; color:white; margin-top:10px;" onclick="handleGoogle()">Continue with Google</button>
            
            <div style="text-align:center; margin-top:20px; font-size:12px; color:#666; cursor:pointer;" onclick="toggleMode()">
                <span id="toggle-txt">New? Apply for Access</span>
            </div>
            <div id="err-msg" style="color:#ef4444; font-size:12px; margin-top:15px; text-align:center;"></div>
        </div>
    </div>

    <div id="wizard-overlay">
        <div id="step-1" class="wiz-step active">
            <div style="font-size:40px; margin-bottom:20px;">‚úã</div>
            <h2 style="color:white;">The Oath</h2>
            <p style="color:#888; max-width:300px; margin-bottom:30px;">I promise to be respectful. Harassment results in a permanent ban.</p>
            <button class="btn-block" onclick="nextStep('step-1','step-2')">I AGREE</button>
        </div>
        <div id="step-2" class="wiz-step">
            <h2 style="color:white;">Identity</h2>
            <p style="color:#888;">Upload your Government ID.</p>
            <div class="upload-area" onclick="document.getElementById('id-file').click()">
                <span>Tap to Upload ID Front</span>
                <input type="file" id="id-file" hidden accept="image/*">
            </div>
            <button class="btn-block" onclick="nextStep('step-2','step-3')">NEXT</button>
        </div>
        <div id="step-3" class="wiz-step">
            <h2 style="color:white;">Liveness</h2>
            <p style="color:#888;">Take a selfie with a Peace Sign (‚úåÔ∏è).</p>
            <div class="upload-area" onclick="document.getElementById('selfie-file').click()">
                <span>Tap to Take Selfie</span>
                <input type="file" id="selfie-file" hidden accept="image/*" capture="user">
            </div>
            <button id="final-btn" class="btn-block" onclick="finishSetup()">SUBMIT</button>
        </div>
        <div id="step-4" class="wiz-step">
            <div style="font-size:40px; margin-bottom:20px;">üöÄ</div>
            <h2 style="color:white;">Received.</h2>
            <p style="color:#888;">You are in the queue.</p>
            <button class="btn-block" onclick="enterApp()">ENTER LOUNGE</button>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getAuth, signInWithPopup, GoogleAuthProvider, signInWithEmailAndPassword, createUserWithEmailAndPassword, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
        import { getFirestore, doc, getDoc, setDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";
        import { getStorage, ref, uploadBytes, getDownloadURL } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-storage.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDFmhk3ybnsVsFenCE3xvdmy5y_4u9ss7o",
            authDomain: "playgroundx-ca021.firebaseapp.com",
            projectId: "playgroundx-ca021",
            storageBucket: "playgroundx-ca021.firebasestorage.app",
            messagingSenderId: "427340828971",
            appId: "1:427340828971:web:1d9e2dc22ecd69593eb56e"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const storage = getStorage(app);
        const provider = new GoogleAuthProvider();

        // --- MOUSE SPOTLIGHT LOGIC ---
        document.addEventListener('mousemove', (e) => {
            const x = (e.clientX / window.innerWidth) * 100;
            const y = (e.clientY / window.innerHeight) * 100;
            document.getElementById('glass-wall').style.setProperty('--x', `${x}%`);
            document.getElementById('glass-wall').style.setProperty('--y', `${y}%`);
        });

        // --- SCROLL REVEAL ---
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if(entry.isIntersecting) entry.target.classList.add('visible');
            });
        }, {threshold: 0.1});
        document.querySelectorAll('section').forEach(s => observer.observe(s));

        window.addEventListener('scroll', () => {
            const nav = document.getElementById('navbar');
            if(window.scrollY > 50) nav.classList.add('scrolled');
            else nav.classList.remove('scrolled');
        });

        // --- AUTH & APP LOGIC ---
        let isSignup = false;
        let currentUser = null;

        window.openAuth = () => document.getElementById('auth-overlay').classList.add('active');
        window.closeAuth = () => document.getElementById('auth-overlay').classList.remove('active');

        window.toggleMode = () => {
            isSignup = !isSignup;
            document.getElementById('auth-title').innerText = isSignup ? "Apply for Access" : "Member Login";
            document.getElementById('auth-btn').innerText = isSignup ? "START APPLICATION" : "SECURE ENTRY";
            document.getElementById('signup-extra').style.display = isSignup ? "block" : "none";
            document.getElementById('toggle-txt').innerText = isSignup ? "Have an account? Login" : "New? Apply for Access";
        };

        window.handleAuth = async () => {
            const email = document.getElementById('email').value;
            const pass = document.getElementById('password').value;
            const dob = document.getElementById('dob').value;
            const btn = document.getElementById('auth-btn');
            const err = document.getElementById('err-msg');

            if(!email || !pass) return;
            btn.disabled = true; btn.innerText = "VERIFYING..."; err.innerText = "";

            try {
                if(isSignup) {
                    if(!dob) throw new Error("DOB Required");
                    const age = new Date().getFullYear() - new Date(dob).getFullYear();
                    if(age < 18) throw new Error("Must be 18+");

                    const res = await createUserWithEmailAndPassword(auth, email, pass);
                    currentUser = res.user;
                    await setDoc(doc(db, 'artifacts', 'playgroundX_Prod_v1', 'public', 'data', 'users', currentUser.uid), {
                        email, dob, idVerified: 'pending_upload', joined: serverTimestamp()
                    });
                    closeAuth();
                    document.getElementById('wizard-overlay').classList.add('active');
                } else {
                    const res = await signInWithEmailAndPassword(auth, email, pass);
                    checkRedirect(res.user);
                }
            } catch(e) { err.innerText = e.message; }
            finally { btn.disabled = false; btn.innerText = isSignup ? "START APPLICATION" : "SECURE ENTRY"; }
        };

        window.handleGoogle = async () => {
            try {
                const res = await signInWithPopup(auth, provider);
                checkRedirect(res.user);
            } catch(e) { document.getElementById('err-msg').innerText = e.message; }
        };

        window.nextStep = (cur, nxt) => {
            document.getElementById(cur).style.display = 'none';
            document.getElementById(nxt).classList.add('active');
        };

        window.finishSetup = async () => {
            const btn = document.getElementById('final-btn');
            const front = document.getElementById('id-file').files[0];
            const selfie = document.getElementById('selfie-file').files[0];

            if(!front || !selfie) { alert("Files required."); return; }
            btn.disabled = true; btn.innerText = "UPLOADING...";

            try {
                const fUrl = await upload(front, `verification/${currentUser.uid}/id_front.jpg`);
                const sUrl = await upload(selfie, `verification/${currentUser.uid}/selfie.jpg`);
                await setDoc(doc(db, 'artifacts', 'playgroundX_Prod_v1', 'public', 'data', 'users', currentUser.uid), {
                    idVerified: 'pending', idPhotoUrl: fUrl, selfieUrl: sUrl
                }, {merge: true});
                nextStep('step-3', 'step-4');
            } catch(e) { alert(e.message); btn.disabled = false; btn.innerText = "SUBMIT"; }
        };

        async function upload(file, path) {
            const sRef = ref(storage, path);
            await uploadBytes(sRef, file);
            return getDownloadURL(sRef);
        }

        async function checkRedirect(user) {
            currentUser = user;
            const snap = await getDoc(doc(db, 'artifacts', 'playgroundX_Prod_v1', 'public', 'data', 'users', user.uid));
            if(!snap.exists() || snap.data().idVerified === 'pending_upload') {
                closeAuth();
                document.getElementById('wizard-overlay').classList.add('active');
            } else {
                if(snap.data().isAdmin) localStorage.setItem('pgX_admin_access', 'true');
                window.location.href = "home.html";
            }
        }
        window.enterApp = () => window.location.href = "home.html";
    </script>
</body>
</html>
